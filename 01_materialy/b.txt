# tekst pochodzi z https://pl.wikipedia.org/wiki/UTF-8
UTF-8 (ang. 8-bit Unicode Transformation Format) â€“ system kodowania Unicode, wykorzystujÄ…cy od 1 do 4 bajtÃ³w do zakodowania pojedynczego znaku, w peÅ‚ni kompatybilny z ASCII. Jest najczÄ™Å›ciej wykorzystywany do przechowywania napisÃ³w w plikach i komunikacji sieciowej.


Spis treÅ›ci
1	Zalety i wady
1.1	Zalety
1.2	Wady
2	SposÃ³b kodowania
3	PrzykÅ‚ad
4	Zobacz teÅ¼
5	Linki zewnÄ™trzne
Zalety i wady
Zalety
KaÅ¼dy tekst w ASCII jest tekstem w UTF-8.
Å»aden znak spoza ASCII nie zawiera bajtu z ASCII.
Zachowuje porzÄ…dek sortowania UCS-4.
Typowy tekst ISO-Latin-X rozrasta siÄ™ w bardzo niewielkim stopniu po przekonwertowaniu do UTF-8.
Nie zawiera bajtÃ³w 0xFF i 0xFE, wiÄ™c Å‚atwo moÅ¼na go odrÃ³Å¼niÄ‡ od tekstu UTF-16.
Znaki o kodzie rÃ³Å¼nym od 0 nie zawierajÄ… bajtu 0, co pozwala stosowaÄ‡ UTF-8 w ciÄ…gach zakoÅ„czonych zerem.
O kaÅ¼dym bajcie wiadomo, czy jest poczÄ…tkiem znaku, czy teÅ¼ leÅ¼y w jego Å›rodku, co nie jest dostÄ™pne np. w kodowaniu EUC.
Nie ma problemÃ³w z little endian vs big endian.
Jest domyÅ›lnym kodowaniem w XML (rÃ³wnieÅ¼ w jego aplikacjach: XHTML, SVG, XSL, CML, MathML).
Wady
Znaki CJK zajmujÄ… po 3 bajty zamiast 2 w kodowaniach narodowych.
Znaki alfabetÃ³w nieÅ‚aciÅ„skich zajmujÄ… po 2 bajty zamiast jednego w kodowaniach narodowych.
UTF-8 nie uÅ¼ywa przesuniÄ™Ä‡ zasiÄ™gÃ³w, co stanowi dodatkowe utrudnienie dla implementacji UTF-8 (szczegÃ³Å‚y poniÅ¼ej)
SposÃ³b kodowania
Mapowanie znakÃ³w Unicode na ciÄ…gi bajtÃ³w:

0x00 do 0x7F            â€“ bity 0xxxxxxx, gdzie kolejne â€xâ€ to bity â€“ liczÄ…c od najwyÅ¼szego
0x80 do 0x7FF           â€“ bity 110xxxxx 10xxxxxx
0x800 do 0xFFFF         â€“ bity 1110xxxx 10xxxxxx 10xxxxxx
0x10000 do 0x1FFFFF     â€“ bity 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
0x200000 do 0x3FFFFFF   â€“ bity 111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
0x4000000 do 0x7FFFFFFF â€“ bity 1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
Znaki z przedziaÅ‚u ASCII (0 do 127) kodowane sÄ… jako jeden bajt, czyli m.in. litery alfabetu Å‚aciÅ„skiego. Polskie znaki diakrytyczne kodowane juÅ¼ sÄ… jako dwa bajty. W listopadzie 2003 roku kodowanie UTF-8 zostaÅ‚o ograniczone zgodnie z RFC 3629 â†“ do 0x10FFFF pozycji, w celu zapewnienia zgodnoÅ›ci z ograniczeniami systemu UTF-16. Rezultatem byÅ‚o usuniÄ™cie wszystkich sekwencji zÅ‚oÅ¼onych z 5 i 6 bajtÃ³w oraz okoÅ‚o poÅ‚owy sekwencji 4-bajtowych. W ten sposÃ³b pozostaÅ‚o dokÅ‚adnie 17 â€¢ 65536 - 2048, czyli 1 112 064 pozycji znakÃ³w moÅ¼liwych do zakodowania w UTF-8. Pomniejszenie liczby kodÃ³w o 2048 wynika z zarezerwowania kodÃ³w z zakresu od U+D800 do U+DFFF dla kodowania UTF-16.

Teoretycznie w UTF-8 ten sam znak moÅ¼na zapisaÄ‡ na kilka sposobÃ³w. PrzykÅ‚adowo znak ASCII / (ukoÅ›nik) moÅ¼na zapisaÄ‡ jako:

00101111
11000000 10101111
11100000 10000000 10101111itd.
Stanowi to zagroÅ¼enie bezpieczeÅ„stwa m.in. dla serwerÃ³w, ktÃ³re sprawdzajÄ… obecnoÅ›Ä‡ znaku / w Å›cieÅ¼kach. Z tego powodu standard UTF-8 przewiduje, Å¼e poprawny jest wyÅ‚Ä…cznie najkrÃ³tszy moÅ¼liwy sposÃ³b zapisu, a kaÅ¼dy program musi odrzucaÄ‡ znaki zapisane dÅ‚uÅ¼szymi sekwencjami niÅ¼ minimalna.

Problemu tego moÅ¼na byÅ‚oby uniknÄ…Ä‡, przy okazji skracajÄ…c nieznacznie wielkoÅ›Ä‡ danych, jeÅ›li wykorzystano by zasadÄ™ przesuniÄ™Ä‡ typu:

sekwencje 1-bajtowe kodujÄ… 0x80 (128) rÃ³Å¼nych znakÃ³w â€“ od 0x00 do 0x7F
sekwencje 2-bajtowe kodujÄ… 0x800 (2048) rÃ³Å¼nych znakÃ³w â€“ od 0x80 do 0x87F
sekwencje 3-bajtowe kodujÄ… 0x10000 (65536) rÃ³Å¼nych znakÃ³w â€“ od 0x880 do 0x1087F
itd.
PrzykÅ‚ad
Kodowanie na podstawie znaku euro â‚¬:

Znak â‚¬ w Unicode ma oznaczenie U+20AC.
Zgodnie z informacjami w poprzednim podrozdziale taka wartoÅ›Ä‡ jest moÅ¼liwa do zakodowania na 3 bajtach.
Liczba szesnastkowa 20AC to binarnie 0010 0000 1010 1100 po uzupeÅ‚nieniu wiodÄ…cymi zerami do 16 bitÃ³w, poniewaÅ¼ tyle bitÃ³w trzeba zakodowaÄ‡ na 3 bajtach w UTF-8.
Kodowanie na trzech bajtach wymaga uÅ¼ycia w pierwszym bajcie trzech wiodÄ…cych bitÃ³w ustawionych na 1, a czwartego na 0 (1110â€¦).
PozostaÅ‚e bity pierwszego bajtu pochodzÄ… z najstarszych czterech bitÃ³w kodowanej wartoÅ›ci w Unicode, co daje (1110 0010), a reszta bitÃ³w dzielona jest na dwa bloki po 6 bitÃ³w kaÅ¼dy (â€¦0000 1010 1100).
Do tych blokÃ³w dodawane sÄ… wiodÄ…ce bity 10, by tworzyÅ‚y nastÄ™pujÄ…ce 8-bitowe wartoÅ›ci 1000 0010 i 1010 1100).
W ten sposÃ³b rezultatem sÄ… trzy bajty w postaci 1110 0010 1000 0010 1010 1100, co w systemie szesnastkowych przyjmuje postaÄ‡ E2 82 AC.
PoniÅ¼sza tabela pozwala zrozumieÄ‡ sposÃ³b kodowana rÃ³Å¼nej dÅ‚ugoÅ›ci numerÃ³w kodowych Unicode w UTF-8.

Unicode	Unicode binarnie	UTF-8 binarnie
 1. bajt   2. bajt   3. bajt   4. bajt	UTF-8 szesnastkowo
$	U+0024	0100100	00100100	24
Â¢	U+00A2	000 10100010	11000010 10100010	C2 A2
â‚¬	U+20AC	00100000 10101100	11100010 10000010 10101100	E2 82 AC
ğˆ	U+10348	00001 00000011 01001000	11110000 10010000 10001101 10001000	F0 90 8D 88
